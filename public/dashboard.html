<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hackerwerkstatt - Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <h1 class="glitch" data-text="TERMINAL">TERMINAL</h1>
            <button id="logout-btn" style="background:red; border-color:darkred; color:white;">LOGOUT</button>
        </div>

        <p>Welcome, <span id="username-display">User</span>.</p>

        <div class="section">
            <h2>SSH Key Configuration</h2>
            <p>Paste your public SSH key here to gain server access (id_rsa.pub or similar).</p>
            <div class="form-group">
                <textarea id="ssh-key" rows="5" placeholder="ssh-ed25519 AAAAC3NzaC1l..."></textarea>
            </div>
            <button id="save-key-btn">Update Key</button>
        </div>

        <div class="section" style="margin-top: 40px; border-top: 1px dashed #333; padding-top: 20px;">
            <h2>Dein Projekt veröffentlichen</h2>
            <p>Bist du bereit, dein eigenes Projekt zu starten? Folge diesen Schritten, um einen Docker-Container mit
                einer öffentlichen URL bereitzustellen.</p>

            <h3>1. Mit KI generieren</h3>
            <p>Kopiere diesen Prompt in ChatGPT oder Claude, um eine funktionierende <code>docker-compose.yml</code> zu
                erhalten:</p>
            <div class="code-block-container">
                <button class="copy-btn" onclick="copyToClipboard(this)">Kopieren</button>
                <div class="code-block">Ich möchte meine Web-App mit Docker Compose deployen. Bitte erstelle mir eine
                    docker-compose.yml Datei. Sie MUSS das externe Netzwerk 'web' verwenden UND Labels für
                    caddy-docker-proxy haben, damit sie unter 'meinprojekt.hackerwerkstatt.de' erreichbar ist (ersetze
                    meinprojekt mit meinem echten Projektnamen). HTTPS wird automatisch von Caddy bereitgestellt. Die
                    Labels sehen so aus: caddy: meinprojekt.hackerwerkstatt.de und caddy.reverse_proxy: "{{upstreams
                    PORT}}".</div>
            </div>

            <h3>2. Nutze diese Vorlage</h3>
            <p>Oder verwende direkt diese Vorlage. Speichere sie als <code>docker-compose.yml</code> auf dem Server.</p>
            <div class="code-block-container">
                <button class="copy-btn" onclick="copyToClipboard(this)">Kopieren</button>
                <pre class="code-block">services:
  my-app:
    build: .  # Oder z.B. image: nginx:alpine
    networks:
      - web
    labels:
      caddy: meinprojekt.hackerwerkstatt.de
      caddy.reverse_proxy: "{{upstreams 80}}"

networks:
  web:
    external: true</pre>
            </div>

            <h3>3. Starten</h3>
            <p>Führe diesen Befehl in dem Ordner aus, in dem deine Datei liegt:</p>
            <div class="code-block-container">
                <button class="copy-btn" onclick="copyToClipboard(this)">Kopieren</button>
                <div class="code-block">docker compose up -d</div>
            </div>
        </div>

        <div id="admin-section" class="section"
            style="margin-top: 40px; border-top: 1px dashed #333; padding-top: 20px;">
            <h2 style="color:red">ADMIN CONTROL</h2>
            <p>Manage users and generate server setup script.</p>

            <button id="download-script-btn">DOWNLOAD SETUP_USERS.SH</button>

            <h3>Registered Users</h3>
            <ul id="user-list">
                <!-- Populated via JS -->
            </ul>
        </div>

        <div id="message"></div>
    </div>
    <script src="script.js"></script>
</body>

</html>